Your VPS has **0 Swap**, which is dangerous for Kubernetes + Kafka + Spring Boot.
Here is the **correct and safe way to increase swap on Ubuntu 22.04**.

---

# âœ… **STEP 1 â€” Create a 4GB swap file**

```bash
sudo fallocate -l 4G /swapfile
```

If `fallocate` gives an error, use:

```bash
sudo dd if=/dev/zero of=/swapfile bs=1M count=4096
```

---

# âœ… **STEP 2 â€” Set correct permissions**

```bash
sudo chmod 600 /swapfile
```

---

# âœ… **STEP 3 â€” Convert file into swap**

```bash
sudo mkswap /swapfile
```

---

# âœ… **STEP 4 â€” Enable swap**

```bash
sudo swapon /swapfile
```

Check:

```bash
free -h
```

Now you should see:

```
Swap: 4.0G
```

---

# âœ… **STEP 5 â€” Make swap permanent (important)**

Otherwise swap disappears on reboot.

```bash
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

---

# ğŸ”¥ **RECOMMENDED: Increase swap if you run many pods**

Use **8GB swap**:

```bash
sudo swapoff -a
sudo rm /swapfile
sudo fallocate -l 8G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

Then set in `/etc/fstab`:

```bash
/swapfile none swap sw 0 0
```

---

# ğŸ“Œ After Swap added â€” verify again

```bash
free -h
```

Should see something like:

```
Swap: 8.0G
```

---

# ğŸ’¡ WHY SWAP IS IMPORTANT?

Without Swap:

* Kafka rebalance â†’ crashes
* Spring Boot JVM â†’ killed by OOM
* Pod scaling â†’ fails
* Ingress â†’ crashes
* PostgreSQL â†’ kills itself
* System becomes unstable

After adding swap your cluster will be MUCH more stable.

---

If you want, I can also tune:

âœ” JVM memory
âœ” Kafka memory
âœ” PostgreSQL shared buffers
âœ” Kubernetes pod resources

Just ask: **â€œOptimize memory settingsâ€**
